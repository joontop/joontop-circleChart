!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.circleChart=e():t.circleChart=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/lib/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n={CSS:{position:"relative",width:"500px",height:"500px",webkitBorderRadius:"50%",borderRadius:"50%",webkitBoxSizing:"border-box",boxSizing:"border-box"},CLASSNAME:"__donut"},r={CSS:{display:"inline-block",verticalAlign:"top",wordWrap:"break-word",wordBreak:"break-all"},CLASSNAME:"__contents_html"},a={CSS:{position:"absolute",top:"50%",left:"50%",webkitTransform:"translateY(-50%)",transform:"translateY(-50%)",textAlign:"center"},CLASSNAME:"__contents_guideline"},s={CSS:{position:"absolute",top:0,left:0,zIndex:7},USEMAP_ID:"imageMap",SRC:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTI3MDI0NTFFQkEwMTFFODgzRjdGMzk5QjUwNEE0OUUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTI3MDI0NTJFQkEwMTFFODgzRjdGMzk5QjUwNEE0OUUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMjcwMjQ0RkVCQTAxMUU4ODNGN0YzOTlCNTA0QTQ5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMjcwMjQ1MEVCQTAxMUU4ODNGN0YzOTlCNTA0QTQ5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlaHZYIAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC"},o={CSS:{position:"absolute",top:"50%",left:"50%",zIndex:5,webkitBorderRadius:"50%",borderRadius:"50%",webkitBoxSizing:"border-box",boxSizing:"border-box"},CLASSNAME:"__inner_circle"},u={CSS:{overflow:"hidden",position:"absolute",top:"50%",left:"50%",width:"100%",height:"100%",webkitBorderRadius:"50%",borderRadius:"50%",webkitTransformOrigin:"0 0",transformOrigin:"0 0",backgroundColor:"eee"},CLASSNAME:"__item"},d={CSS:{overflow:"hidden",position:"absolute",top:0,right:0,width:"50%",height:"100%"},CLASSNAME:"__right"},l={CSS:{overflow:"hidden",position:"absolute",top:0,left:0,width:"50%",height:"100%"},CLASSNAME:"__left"},h={CSS:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",webkitTransformOrigin:"100% 50%",transformOrigin:"100% 50%",webkitTransform:"rotate(0deg)",transform:"rotate(0deg)"},CLASSNAME:"__right_box"},c={CSS:{position:"absolute",top:0,left:0,width:"100%",height:"100%",webkitTransformOrigin:"100% 50%",transformOrigin:"100% 50%",webkitTransform:"rotate(180deg)",transform:"rotate(180deg)"},CLASSNAME:"__left_box"},g={CSS:{position:"absolute",top:0,left:0,width:0,height:0,zIndex:6},CLASSNAME:"__contents_point"};function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={contentsMinWidth:100,data:[],outerDiameter:"500",innerDiameter:"200",outerColor:"#ffffff",innerColor:"#ffffff",isContents:!1,isDesc:!1,target:null,id:null}}var e,i,n;return e=t,(i=[{key:"setDatas",value:function(t){p(this.options,t),this.options.isDesc&&this.options.data.sort(function(t,e){return t.percent>e.percent?-1:t.percent<e.percent?1:0}),this.options.contentsMinWidth<=100&&(this.options.contentsMinWidth=100);var e=Math.random().toString(36).substring(7);this.options.id="__mapid_"+e}},{key:"getContentsMinWidth",value:function(){return this.options.contentsMinWidth}},{key:"getData",value:function(){return this.options.data}},{key:"getOuterColor",value:function(){return this.options.outerColor}},{key:"getInnerColor",value:function(){return this.options.innerColor}},{key:"getOuterDiameter",value:function(){return this.options.outerDiameter}},{key:"getInnerDiameter",value:function(){return this.options.innerDiameter}},{key:"getIsContents",value:function(){return this.options.isContents}},{key:"getTarget",value:function(){return this.options.target}},{key:"getId",value:function(){return this.options.id}}])&&f(e.prototype,i),n&&f(e,n),t}());function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v.setDatas(e),this.state={}}var e,i,p;return e=t,(i=[{key:"start",value:function(){this.setState(),this.setEvent();var t=this.getDonut();this.state.target.innerHTML="",this.state.target.appendChild(t)}},{key:"setState",value:function(){this.state={data:v.getData(),inner:{color:v.getInnerColor(),diameter:v.getInnerDiameter(),radius:v.getInnerDiameter()/2},isContents:v.getIsContents(),isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isTouch:!1,outer:{color:v.getOuterColor(),diameter:v.getOuterDiameter(),radius:v.getOuterDiameter()/2},target:v.getTarget(),areas:[],dividers:[]},this.state.centerRadius=this.state.inner.radius+(this.state.outer.radius-this.state.inner.radius)/2}},{key:"setEvent",value:function(){this.state.isMobile?(this.state.target.addEventListener("touchstart",this.onStart.bind(this)),document.addEventListener("touchmove",this.onMove.bind(this)),document.addEventListener("touchend",this.onEnd.bind(this))):(this.state.target.addEventListener("mouseover",this.onStart.bind(this)),this.state.target.addEventListener("mouseout",this.onEnd.bind(this)))}},{key:"addOnClass",value:function(t){var e=this.state.isMobile?t.changedTouches[0].clientX:t.clientX,i=this.state.isMobile?t.changedTouches[0].clientY:t.clientY,n=document.elementFromPoint(e,i);if(n&&n.nodeName&&"area"===n.nodeName.toLowerCase()&&n.getAttribute("area-number"))for(var r=n.getAttribute("area-number"),a=0;a<this.state.dividers.length;a++)this.state.dividers[a].getAttribute("divider-number")===r?-1===this.state.dividers[a].className.indexOf("on")&&this.state.dividers[a].classList.add("on"):-1!==this.state.dividers[a].className.indexOf("on")&&this.state.dividers[a].classList.remove("on")}},{key:"onStart",value:function(t){this.state.isTouch=!0,this.state.isMobile&&t.preventDefault(),this.addOnClass(t)}},{key:"onMove",value:function(t){this.state.isTouch&&(this.state.isMobile&&t.preventDefault(),this.addOnClass(t))}},{key:"onEnd",value:function(){this.state.isTouch=!1;for(var t=0;t<this.state.dividers.length;t++)-1!==this.state.dividers[t].className.indexOf("on")&&this.state.dividers[t].classList.remove("on")}},{key:"getSin",value:function(t,e){return Math.sin(t*Math.PI/180)*e}},{key:"getCos",value:function(t,e){return Math.cos(t*Math.PI/180)*e}},{key:"getArea",value:function(t,e,i){for(var n=e+i,r=document.createElement("area"),a=this.state.outer.radius+","+this.state.outer.radius,s=i;s<n;s++){var o=this.getSin(s,this.state.outer.radius),u=this.getCos(s,this.state.outer.radius);a=a+","+parseInt(this.state.outer.radius+o)+","+parseInt(this.state.outer.radius-u)}return r.setAttribute("shape","poly"),r.setAttribute("coords",a),r.setAttribute("area-number",t),this.state.areas.push(r),r}},{key:"getContents",value:function(t){var e=document.createElement("div");return e.setAttribute("class",r.CLASSNAME),b(e.style,r.CSS),e.innerHTML=t.html||"",e}},{key:"getDonut",value:function(){var t=document.createDocumentFragment(),e=document.createElement("div"),i=this.getInner();return e.setAttribute("class",n.CLASSNAME),b(e.style,n.CSS,{backgroundColor:this.state.outer.color,height:this.state.outer.diameter+"px",width:this.state.outer.diameter+"px"}),b(i.style,{backgroundColor:"transparent",zIndex:8}),e.appendChild(this.getDivider()),e.appendChild(this.getInner()),e.appendChild(i),this.state.isContents&&(e.appendChild(this.getImg()),e.appendChild(this.getMap())),t.appendChild(e),t.firstChild}},{key:"getGuideline",value:function(){var t=document.createElement("div");return t.setAttribute("class",a.CLASSNAME),b(t.style,a.CSS,{marginLeft:-v.getContentsMinWidth()/2+"px",width:v.getContentsMinWidth()+"px"}),t}},{key:"getImg",value:function(){var t=document.createElement("img");return t.setAttribute("usemap","#"+v.getId()),t.setAttribute("src",s.SRC),b(t.style,s.CSS,{width:this.state.outer.diameter+"px",height:this.state.outer.diameter+"px"}),t}},{key:"getInner",value:function(){var t=document.createElement("div");return t.setAttribute("class",o.CLASSNAME),b(t.style,o.CSS,{backgroundColor:this.state.inner.color,height:this.state.inner.diameter+"px",marginLeft:-this.state.inner.radius+"px",marginTop:-this.state.inner.radius+"px",width:this.state.inner.diameter+"px"}),t}},{key:"getDivider",value:function(){for(var t=0,e=document.createDocumentFragment(),i=0,n=this.state.data.length;i<n;i++){var r=document.createElement("div");r.setAttribute("divider-number",i);var a=Math.round(3.6*this.state.data[i].percent),s=a/2+t;r.appendChild(this.getItems(i,t,a)),this.state.isContents&&r.appendChild(this.getPoints(i,s)),t+=a,this.state.dividers.push(r),e.appendChild(r)}return e}},{key:"getItems",value:function(t,e,i){var n=document.createElement("div");n.setAttribute("class",u.CLASSNAME),b(n.style,u.CSS,{webkitTransform:"rotate("+e+"deg) translateX(-50%) translateY(-50%)",transform:"rotate("+e+"deg) translateX(-50%) translateY(-50%)"});var r=this.getRight();if(r.appendChild(this.getRightBox(this.state.data[t],i)),n.appendChild(r),i>180){var a=this.getLeft();a.appendChild(this.getLeftBox(this.state.data[t],i)),n.appendChild(a)}return n}},{key:"getPoints",value:function(t,e){var i=document.createElement("div");i.setAttribute("class",g.CLASSNAME);var n=this.getSin(e,this.state.centerRadius),r=this.getCos(e,this.state.centerRadius),a=Math.round(this.state.outer.radius+n),s=Math.round(this.state.outer.radius-r);b(i.style,g.CSS,{top:s+"px",left:a+"px"});var o=this.getGuideline(),u=this.getContents(this.state.data[t]);return o.appendChild(u),i.appendChild(o),i}},{key:"getMap",value:function(){var t=document.createElement("map");t.setAttribute("name",v.getId()),t.setAttribute("id",v.getId());for(var e=0,i=document.createDocumentFragment(),n=0;n<this.state.data.length;n++){var r=Math.round(3.6*this.state.data[n].percent),a=this.getArea(n,r,e);i.appendChild(a),e+=r}return t.appendChild(i),t}},{key:"getRight",value:function(){var t=document.createElement("div");return t.setAttribute("class",d.CLASSNAME),b(t.style,d.CSS),t}},{key:"getLeft",value:function(){var t=document.createElement("div");return t.setAttribute("class",l.CLASSNAME),b(t.style,l.CSS),t}},{key:"getRightBox",value:function(t,e){var i=e>180?180:e,n=document.createElement("div");return n.setAttribute("class",h.CLASSNAME),b(n.style,h.CSS,{backgroundColor:t.color,webkitTransform:"rotate("+i+"deg) translateZ(0)",transform:"rotate("+i+"deg) translateZ(0)"}),n}},{key:"getLeftBox",value:function(t,e){var i=e>180?e:180,n=document.createElement("div");return n.setAttribute("class",c.CLASSNAME),b(n.style,c.CSS,{backgroundColor:t.color,webkitTransform:"rotate("+i+"deg) translateZ(0)",transform:"rotate("+i+"deg) translateZ(0)"}),n}}])&&m(e.prototype,i),p&&m(e,p),t}();e.default=A}])});